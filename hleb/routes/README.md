# Директория `routes`

Директория `routes/` в Hleb-приложении содержит файлы, определяющие карту маршрутизации вашего веб-приложения. Маршрутизация — это процесс сопоставления URL-адресов (и HTTP-методов) с конкретными обработчиками, обычно методами контроллеров.

## Основное назначение

Файлы в этой директории, и в первую очередь `map.php`, используются фреймворком Hleb для понимания того, какой код должен быть выполнен при поступлении запроса на определенный URL. Это позволяет создавать чистые, ЧПУ (человеко-понятные URL) и гибко управлять логикой обработки запросов.

## Содержимое и его роль

*   **`map.php`**:
    *   **Назначение:** Это основной и, как правило, единственный файл в данной директории для стандартного Hleb-приложения. В нем с помощью специального синтаксиса, предоставляемого Hleb (например, `Route::get()`, `Route::post()`, `Route::group()`), определяются все маршруты приложения.
    *   **Для бота:** Этот файл будет **значительно изменен** при разработке интернет-магазина. В него будут добавлены:
        *   Маршрут для вебхука Telegram, который будет принимать обновления от Telegram API.
        *   Маршруты для API, которые будет использовать ваш Mini App (например, для получения списка товаров, добавления в корзину, оформления заказа).
        *   Маршруты для административной панели магазина (просмотр заказов, управление товарами и т.д.).
        *   Маршруты для любых других публичных веб-страниц магазина, если они будут.

## Влияние на разработку Telegram-бота и интернет-магазина

Файл `hleb/routes/map.php` является критически важным для связывания внешних запросов (от Telegram, от Mini App, от браузера администратора) с соответствующей логикой в ваших контроллерах (`app/Shop/.../Controllers/`).

**Примеры добавляемых маршрутов (концептуально):**

```php
// Для вебхука Telegram
Route::post(config('telegram.webhook_path'), [App\Shop\Product\Controllers\ProductController::class, 'handleWebhook'])->name('telegram.webhook');

// Для API Mini App
Route::group('/api/miniapp/v1', function() {
    Route::get('/products', [App\Shop\Product\Controllers\ProductController::class, 'listForMiniApp']);
    Route::post('/cart/add', [App\Shop\Cart\Controllers\CartController::class, 'addToCartMiniApp']);
    // ... и т.д.
})->prefix('/api/miniapp/v1');

// Для админ-панели
Route::group('/admin/shop', function() {
    Route::get('/', [App\Shop\Admin\Controllers\AdminDashboardController::class, 'index'])->name('admin.shop.dashboard');
    // ... и т.д.
})->prefix('admin/shop')->middleware('AdminAuthMiddleware');
```

Тщательное проектирование маршрутов обеспечит логичную и понятную структуру URL-адресов вашего приложения и API, что важно как для разработки, так и для возможной интеграции с другими системами.
